2025-10-28 13:58:41.708 [main] INFO  ChatAppServer - =================================
2025-10-28 13:58:41.718 [main] INFO  ChatAppServer -   ChatApp Server Starting...   
2025-10-28 13:58:41.720 [main] INFO  ChatAppServer - =================================
2025-10-28 13:58:41.720 [main] INFO  ChatAppServer - Initializing database connection...
2025-10-28 13:58:41.744 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-28 13:58:42.190 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@53fb3dab
2025-10-28 13:58:42.191 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-28 13:58:42.195 [main] INFO  ChatAppServer - Database connection pool initialized successfully
2025-10-28 13:58:42.199 [main] INFO  ChatAppServer - Connected to: jdbc:mysql://localhost:3306/chatapp_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
2025-10-28 13:58:42.213 [main] INFO  ChatAppServer - Database connection established
2025-10-28 13:58:42.213 [main] INFO  ChatAppServer - Starting chat server...
2025-10-28 13:58:42.219 [main] INFO  ChatAppServer - Server started on port 8888
2025-10-28 13:58:42.219 [main] INFO  ChatAppServer - Waiting for clients...
2025-10-28 14:05:48.907 [main] INFO  ChatAppServer - =================================
2025-10-28 14:05:48.912 [main] INFO  ChatAppServer -   ChatApp Server Starting...   
2025-10-28 14:05:48.913 [main] INFO  ChatAppServer - =================================
2025-10-28 14:05:48.913 [main] INFO  ChatAppServer - Initializing database connection...
2025-10-28 14:05:48.934 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-28 14:05:49.310 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@74e28667
2025-10-28 14:05:49.311 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-28 14:05:49.316 [main] INFO  ChatAppServer - Database connection pool initialized successfully
2025-10-28 14:05:49.320 [main] INFO  ChatAppServer - Connected to: jdbc:mysql://localhost:3306/chatapp_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
2025-10-28 14:05:49.342 [main] INFO  ChatAppServer - Database connection established
2025-10-28 14:05:49.342 [main] INFO  ChatAppServer - Starting chat server...
2025-10-28 14:05:49.345 [main] INFO  ChatAppServer - Server started on port 8888
2025-10-28 14:05:49.345 [main] INFO  ChatAppServer - Waiting for clients...
2025-10-28 14:06:51.196 [main] INFO  ChatAppServer - New client connected: /127.0.0.1
2025-10-28 14:06:51.210 [Thread-1] INFO  ChatAppServer - Client connected: /127.0.0.1
2025-10-28 14:07:16.571 [Thread-1] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"REGISTER_REQUEST","data":{"password":"123456","fullName":"th","email":"nguyenduythang2808@gmail.com","username":"th"},"timestamp":1761635236461,"error":null,"success":true}
2025-10-28 14:07:16.647 [Thread-1] INFO  ChatAppServer - [SERVER] Handling: REGISTER_REQUEST
2025-10-28 14:07:17.131 [Thread-1] ERROR ChatAppServer - Registration failed: Lỗi hệ thống khi tạo OTP
java.lang.Exception: Lỗi hệ thống khi tạo OTP
	at com.chatapp.server.service.AuthService.register(AuthService.java:81)
	at com.chatapp.server.handler.AuthHandler.handleRegister(AuthHandler.java:81)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:88)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:07:17.143 [Thread-1] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"REGISTER_RESPONSE","data":{},"timestamp":1761635237137,"error":"Lỗi hệ thống khi tạo OTP","success":false}
2025-10-28 14:07:23.459 [Thread-1] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"REGISTER_REQUEST","data":{"password":"123456","fullName":"th","email":"nguyenduythang2808@gmail.com","username":"th"},"timestamp":1761635243458,"error":null,"success":true}
2025-10-28 14:07:23.460 [Thread-1] INFO  ChatAppServer - [SERVER] Handling: REGISTER_REQUEST
2025-10-28 14:07:23.490 [Thread-1] ERROR ChatAppServer - Registration failed: Tên đăng nhập đã tồn tại
java.lang.Exception: Tên đăng nhập đã tồn tại
	at com.chatapp.server.service.AuthService.register(AuthService.java:50)
	at com.chatapp.server.handler.AuthHandler.handleRegister(AuthHandler.java:81)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:88)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:07:23.491 [Thread-1] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"REGISTER_RESPONSE","data":{},"timestamp":1761635243491,"error":"Tên đăng nhập đã tồn tại","success":false}
2025-10-28 14:08:18.407 [main] INFO  ChatAppServer - New client connected: /127.0.0.1
2025-10-28 14:08:18.409 [Thread-2] INFO  ChatAppServer - Client connected: /127.0.0.1
2025-10-28 14:08:23.079 [Thread-2] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"LOGIN_REQUEST","data":{"password":"123456","username":"th"},"timestamp":1761635303078,"error":null,"success":true}
2025-10-28 14:08:23.080 [Thread-2] INFO  ChatAppServer - [SERVER] Handling: LOGIN_REQUEST
2025-10-28 14:08:23.108 [Thread-2] ERROR ChatAppServer - Login failed: Tên đăng nhập hoặc mật khẩu không đúng
java.lang.Exception: Tên đăng nhập hoặc mật khẩu không đúng
	at com.chatapp.server.service.AuthService.login(AuthService.java:122)
	at com.chatapp.server.handler.AuthHandler.handleLogin(AuthHandler.java:40)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:80)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:08:23.109 [Thread-2] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"LOGIN_RESPONSE","data":{},"timestamp":1761635303109,"error":"Tên đăng nhập hoặc mật khẩu không đúng","success":false}
2025-10-28 14:08:39.185 [Thread-2] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"LOGIN_REQUEST","data":{"password":"12345","username":"th"},"timestamp":1761635319184,"error":null,"success":true}
2025-10-28 14:08:39.186 [Thread-2] INFO  ChatAppServer - [SERVER] Handling: LOGIN_REQUEST
2025-10-28 14:08:39.189 [Thread-2] ERROR ChatAppServer - Login failed: Tên đăng nhập hoặc mật khẩu không đúng
java.lang.Exception: Tên đăng nhập hoặc mật khẩu không đúng
	at com.chatapp.server.service.AuthService.login(AuthService.java:122)
	at com.chatapp.server.handler.AuthHandler.handleLogin(AuthHandler.java:40)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:80)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:08:39.191 [Thread-2] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"LOGIN_RESPONSE","data":{},"timestamp":1761635319190,"error":"Tên đăng nhập hoặc mật khẩu không đúng","success":false}
2025-10-28 14:08:42.297 [Thread-2] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"LOGIN_REQUEST","data":{"password":"123456","username":"th"},"timestamp":1761635322296,"error":null,"success":true}
2025-10-28 14:08:42.298 [Thread-2] INFO  ChatAppServer - [SERVER] Handling: LOGIN_REQUEST
2025-10-28 14:08:42.300 [Thread-2] ERROR ChatAppServer - Login failed: Tên đăng nhập hoặc mật khẩu không đúng
java.lang.Exception: Tên đăng nhập hoặc mật khẩu không đúng
	at com.chatapp.server.service.AuthService.login(AuthService.java:122)
	at com.chatapp.server.handler.AuthHandler.handleLogin(AuthHandler.java:40)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:80)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:08:42.301 [Thread-2] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"LOGIN_RESPONSE","data":{},"timestamp":1761635322301,"error":"Tên đăng nhập hoặc mật khẩu không đúng","success":false}
2025-10-28 14:08:46.713 [Thread-2] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"LOGIN_REQUEST","data":{"password":"12346","username":"th"},"timestamp":1761635326712,"error":null,"success":true}
2025-10-28 14:08:46.714 [Thread-2] INFO  ChatAppServer - [SERVER] Handling: LOGIN_REQUEST
2025-10-28 14:08:46.716 [Thread-2] ERROR ChatAppServer - Login failed: Tên đăng nhập hoặc mật khẩu không đúng
java.lang.Exception: Tên đăng nhập hoặc mật khẩu không đúng
	at com.chatapp.server.service.AuthService.login(AuthService.java:122)
	at com.chatapp.server.handler.AuthHandler.handleLogin(AuthHandler.java:40)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:80)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:08:46.718 [Thread-2] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"LOGIN_RESPONSE","data":{},"timestamp":1761635326716,"error":"Tên đăng nhập hoặc mật khẩu không đúng","success":false}
2025-10-28 14:08:51.981 [Thread-2] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"LOGIN_REQUEST","data":{"password":"1234","username":"th"},"timestamp":1761635331980,"error":null,"success":true}
2025-10-28 14:08:51.983 [Thread-2] INFO  ChatAppServer - [SERVER] Handling: LOGIN_REQUEST
2025-10-28 14:08:51.985 [Thread-2] ERROR ChatAppServer - Login failed: Tên đăng nhập hoặc mật khẩu không đúng
java.lang.Exception: Tên đăng nhập hoặc mật khẩu không đúng
	at com.chatapp.server.service.AuthService.login(AuthService.java:122)
	at com.chatapp.server.handler.AuthHandler.handleLogin(AuthHandler.java:40)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:80)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:08:51.987 [Thread-2] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"LOGIN_RESPONSE","data":{},"timestamp":1761635331987,"error":"Tên đăng nhập hoặc mật khẩu không đúng","success":false}
2025-10-28 14:09:20.270 [Thread-2] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"REGISTER_REQUEST","data":{"password":"123456","fullName":"th","email":"nguyenduythang2808@gmail.com","username":"th"},"timestamp":1761635360269,"error":null,"success":true}
2025-10-28 14:09:20.270 [Thread-2] INFO  ChatAppServer - [SERVER] Handling: REGISTER_REQUEST
2025-10-28 14:09:20.427 [Thread-2] ERROR ChatAppServer - Registration failed: Lỗi hệ thống khi tạo OTP
java.lang.Exception: Lỗi hệ thống khi tạo OTP
	at com.chatapp.server.service.AuthService.register(AuthService.java:81)
	at com.chatapp.server.handler.AuthHandler.handleRegister(AuthHandler.java:81)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:88)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:09:20.429 [Thread-2] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"REGISTER_RESPONSE","data":{},"timestamp":1761635360429,"error":"Lỗi hệ thống khi tạo OTP","success":false}
2025-10-28 14:09:22.338 [main] INFO  ChatAppServer - New client connected: /127.0.0.1
2025-10-28 14:09:22.339 [Thread-3] INFO  ChatAppServer - Client connected: /127.0.0.1
2025-10-28 14:09:27.806 [Thread-3] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"LOGIN_REQUEST","data":{"password":"123456","username":"th"},"timestamp":1761635367805,"error":null,"success":true}
2025-10-28 14:09:27.807 [Thread-3] INFO  ChatAppServer - [SERVER] Handling: LOGIN_REQUEST
2025-10-28 14:09:27.809 [Thread-3] ERROR ChatAppServer - Login failed: Tên đăng nhập hoặc mật khẩu không đúng
java.lang.Exception: Tên đăng nhập hoặc mật khẩu không đúng
	at com.chatapp.server.service.AuthService.login(AuthService.java:122)
	at com.chatapp.server.handler.AuthHandler.handleLogin(AuthHandler.java:40)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:80)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:09:27.810 [Thread-3] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"LOGIN_RESPONSE","data":{},"timestamp":1761635367810,"error":"Tên đăng nhập hoặc mật khẩu không đúng","success":false}
2025-10-28 14:09:37.417 [Thread-3] INFO  ChatAppServer - [SERVER] <<< RECV: {"type":"LOGIN_REQUEST","data":{"password":"123456","username":"th"},"timestamp":1761635377417,"error":null,"success":true}
2025-10-28 14:09:37.417 [Thread-3] INFO  ChatAppServer - [SERVER] Handling: LOGIN_REQUEST
2025-10-28 14:09:37.423 [Thread-3] ERROR ChatAppServer - Login failed: Tên đăng nhập hoặc mật khẩu không đúng
java.lang.Exception: Tên đăng nhập hoặc mật khẩu không đúng
	at com.chatapp.server.service.AuthService.login(AuthService.java:122)
	at com.chatapp.server.handler.AuthHandler.handleLogin(AuthHandler.java:40)
	at com.chatapp.server.core.ClientHandler.handlePacket(ClientHandler.java:80)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:44)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:09:37.423 [Thread-3] INFO  ChatAppServer - [SERVER] >>> SEND: {"type":"LOGIN_RESPONSE","data":{},"timestamp":1761635377423,"error":"Tên đăng nhập hoặc mật khẩu không đúng","success":false}
2025-10-28 14:09:40.079 [Thread-1] ERROR ChatAppServer - Client handler error: Connection reset
java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:328)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:287)
	at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:330)
	at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:190)
	at java.base/java.io.InputStreamReader.read(InputStreamReader.java:177)
	at java.base/java.io.BufferedReader.fill(BufferedReader.java:162)
	at java.base/java.io.BufferedReader.readLine(BufferedReader.java:329)
	at java.base/java.io.BufferedReader.readLine(BufferedReader.java:396)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:39)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:09:40.081 [Thread-1] INFO  ChatAppServer - Client disconnected
2025-10-28 14:09:40.084 [Thread-3] ERROR ChatAppServer - Client handler error: Connection reset
java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:328)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:287)
	at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:330)
	at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:190)
	at java.base/java.io.InputStreamReader.read(InputStreamReader.java:177)
	at java.base/java.io.BufferedReader.fill(BufferedReader.java:162)
	at java.base/java.io.BufferedReader.readLine(BufferedReader.java:329)
	at java.base/java.io.BufferedReader.readLine(BufferedReader.java:396)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:39)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:09:40.084 [Thread-2] ERROR ChatAppServer - Client handler error: Connection reset
java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:328)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:287)
	at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:330)
	at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:190)
	at java.base/java.io.InputStreamReader.read(InputStreamReader.java:177)
	at java.base/java.io.BufferedReader.fill(BufferedReader.java:162)
	at java.base/java.io.BufferedReader.readLine(BufferedReader.java:329)
	at java.base/java.io.BufferedReader.readLine(BufferedReader.java:396)
	at com.chatapp.server.core.ClientHandler.run(ClientHandler.java:39)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-10-28 14:09:40.086 [Thread-3] INFO  ChatAppServer - Client disconnected
2025-10-28 14:09:40.086 [Thread-2] INFO  ChatAppServer - Client disconnected
